# Active Context: 10x K Factor Project

## Current Phase
**Phase 6 Complete** - 6 of 10 phases completed. Core viral growth system operational with all agents, loops, and services implemented.

## Immediate Focus
1. ✅ Phase 1-6: Foundation, loops, intelligence, alive layer, results sharing, supporting agents
2. ⏳ Phase 7: Frontend Development (Ready to start)
3. ⏳ Phase 8: Analytics Dashboards
4. ⏳ Phase 9: Compliance Implementation
5. ⏳ Phase 10: Documentation & Demo

## Recent Decisions

### Viral Loops Selected ✅
- **4 loops implemented**: Buddy Challenge, Results Rally, Proud Parent, Streak Rescue
- Selected for broad persona coverage and high engagement potential
- All loops integrated and operational

### Technical Stack ✅
- **Language**: TypeScript (ES2022) with ES Modules
- **Protocol**: Model Context Protocol (MCP) pattern
- **Architecture**: Agent-based with event-driven design
- Event streaming: EventBus (ready for production service)
- Frontend: Ready for React/Vue/Next.js integration

### Agent Architecture
- MCP protocol for agent communication
- JSON Schema for contracts
- <150ms decision SLA
- Explainability required for all decisions

## Next Steps

### Immediate (This Session)
1. Complete PRD document
2. Create initial task breakdown
3. Set up .cursor/rules for project patterns
4. Define agent contract schemas

### Short Term (Next Sessions)
1. Choose and document 4+ viral loops
2. Design agent interfaces (MCP contracts)
3. Create event schema for analytics
4. Design session transcription pipeline
5. Plan share card generation system

### Medium Term
1. Implement Loop Orchestrator agent
2. Implement Personalization agent
3. Implement Experimentation agent
4. Build attribution/smart links service
5. Create frontend presence UI
6. Build results page share surfaces

## Active Considerations

### Ambiguous Elements (Need Decisions)
1. **Optimal Reward Mix**: 
   - AI minutes vs. gem boosts vs. class passes
   - By persona and CAC/LTV math
   - Need to define reward economics

2. **Leaderboard Fairness**:
   - New users vs. veterans
   - Age bands
   - Subject-specific vs. global

3. **Spam Thresholds**:
   - Caps on invites/day
   - Cool-down periods
   - School email handling

4. **K-factor Definition**:
   - Multi-touch attribution (view → sign-up → FVM)
   - Which events count toward K
   - Time windows for attribution

5. **Tutor Incentives**:
   - Reward structure for referrals
   - Disclosure requirements
   - Attribution rules

### Open Questions
- Which transcription service to use?
- How to handle session summarization at scale?
- What's the baseline referral rate to beat?
- How to handle edge cases (orphaned invites, duplicate accounts)?
- What's the acceptable latency for presence updates?

## Current Work Artifacts

### Created
- ✅ Memory bank structure (projectbrief.md, productContext.md, systemPatterns.md, techContext.md)
- ⏳ PRD document (in progress)
- ⏳ Task breakdown (in progress)

### Pending
- Agent contract schemas
- Event schema definitions
- Frontend component designs
- Compliance memo template
- Analytics dashboard designs

## Key Constraints

### Must Haves
- ≥ 4 viral loops functioning end-to-end
- ≥ 4 agentic actions (≥2 tutor, ≥2 student)
- MCP agents for required agents
- Measured K-factor with clear readout
- Presence UI and leaderboard demonstration
- Compliance memo approved
- Results-page sharing active

### Nice to Haves
- Additional viral loops beyond 4
- Advanced personalization
- Multi-language support
- Advanced fraud detection
- Real-time cohort rooms

## Success Criteria Reminder

### Primary Metrics
- K ≥ 1.20 for at least one loop (14-day cohort)
- +20% lift to FVM
- Referrals ≥ 30% of new weekly signups
- +10% D7 retention for referred cohorts
- +5% tutor utilization via referrals

### Quality Metrics
- ≥ 4.7/5 CSAT on loop prompts & rewards
- <0.5% fraudulent joins
- <1% opt-out from growth comms

## Notes
- This is a bootcamp project - balance ambition with deliverability
- Focus on thin-slice prototype that demonstrates core concepts
- Ensure all agents provide rationale for auditability
- Prioritize COPPA/FERPA compliance from day one

